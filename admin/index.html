<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Admin | Editar menu-data.js</title>
  <link rel="icon" href="../favicon.svg" type="image/svg+xml" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="admin.css" />
</head>

<body>
  <header class="admin-hero">
    <div>
      <p class="kicker">Painel do Cardápio</p>
      <h1>Atualizar Preços e Itens</h1>
      <p class="subtle">
        Altere o cardápio abaixo e clique em <strong>Salvar no GitHub</strong>.
        Em poucos instantes o site será atualizado.
      </p>
    </div>
    <div class="admin-actions">
      <a class="btn btn-ghost" href="../" target="_blank" rel="noopener">Ver cardápio</a>
      <button id="save-remote" class="btn btn-primary">Salvar no GitHub</button>
    </div>
  </header>

  <main>
    <form class="hidden-form" aria-hidden="true">
      <input id="owner" type="text" value="caeg0n" />
      <input id="repo" type="text" value="html-camppedidosbigbrasa-v1" />
      <input id="branch" type="text" value="main" />
      <input id="path" type="text" value="js/menu-data.js" />
      <input id="token" type="password" />
    </form>
    <textarea id="editor" spellcheck="false"></textarea>
  </main>

  <dialog id="key-dialog" class="key-dialog">
    <form method="dialog" class="key-card">
      <h2>Chave de acesso</h2>
      <p class="subtle">Digite a chave para liberar o salvamento no GitHub.</p>
      <input id="key-input" type="password" placeholder="Sua chave" autocomplete="current-password" />
      <div class="key-actions">
        <button value="cancel" class="btn btn-ghost" type="submit">Cancelar</button>
        <button id="key-confirm" value="ok" class="btn btn-primary" type="submit">Desbloquear</button>
      </div>
      <p class="hint">A chave não sai do navegador. Ela só desbloqueia o token criptografado.</p>
    </form>
  </dialog>

  <section class="helper">
    <h2>Como aplicar</h2>
    <ol>
      <li>Edite o conteúdo no editor.</li>
      <li>Clique em <strong>Baixar menu-data.js</strong>.</li>
      <li>Substitua o arquivo <code>menu-data.js</code> no projeto.</li>
      <li>Faça o deploy novamente.</li>
    </ol>
  </section>

  <script src="../js/menu-data.js"></script>
  <script src="admin.js"></script>
  <script>
    // Safe area runtime
    (function () {
      var root = document.documentElement;
      if (!root) return;

      var MAX_BOTTOM_INSET = 96;
      var MAX_TOP_INSET = 72;

      function toPx(value) {
        var num = parseFloat(String(value || "").replace("px", "").trim());
        return Number.isFinite(num) ? num : 0;
      }

      function readVar(name) {
        try {
          return toPx(getComputedStyle(root).getPropertyValue(name));
        } catch (_err) {
          return 0;
        }
      }

      function viewportTopInset() {
        if (!window.visualViewport) return 0;
        var raw = window.visualViewport.offsetTop;
        if (!Number.isFinite(raw) || raw <= 0 || raw > MAX_TOP_INSET) return 0;
        return raw;
      }

      function viewportBottomInset() {
        if (!window.visualViewport) return 0;
        var vv = window.visualViewport;
        var raw = window.innerHeight - (vv.height + vv.offsetTop);
        if (!Number.isFinite(raw) || raw <= 0 || raw > MAX_BOTTOM_INSET) return 0;
        return raw;
      }

      function updateSafeArea() {
        var envTop = readVar("--campp-safe-area-top-env");
        var envBottom = readVar("--campp-safe-area-bottom-env");
        var topInset = Math.max(envTop, viewportTopInset(), 0);
        var bottomInset = Math.max(envBottom, viewportBottomInset(), 0);
        root.style.setProperty("--campp-safe-area-top", Math.round(topInset) + "px");
        root.style.setProperty("--campp-safe-area-bottom", Math.round(bottomInset) + "px");
      }

      function scheduleUpdate() {
        if (typeof window.requestAnimationFrame === "function") {
          window.requestAnimationFrame(updateSafeArea);
          return;
        }
        setTimeout(updateSafeArea, 0);
      }

      updateSafeArea();
      window.addEventListener("resize", scheduleUpdate, { passive: true });
      window.addEventListener("orientationchange", scheduleUpdate, { passive: true });

      if (window.visualViewport) {
        window.visualViewport.addEventListener("resize", scheduleUpdate, { passive: true });
        window.visualViewport.addEventListener("scroll", scheduleUpdate, { passive: true });
      }
    })();
  </script>
</body>

</html>